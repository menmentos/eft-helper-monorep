import React, { useState, useEffect } from 'react';
import BossList from './pages/BossList.jsx';
import MapView from './pages/MapView.jsx';
import axios from 'axios';
export default function App(){ const [page,setPage]=useState('home'); const [selectedBoss,setSelectedBoss]=useState(null); const [goon,setGoon]=useState({map:null,updatedAt:null}); useEffect(()=>{ axios.get((import.meta.env.VITE_BACKEND_URL||'http://localhost:5000') + '/api/goons').then(r=>setGoon(r.data)).catch(()=>{}); },[]); return (<div><header style={{padding:12,background:'#0f172a',color:'#fff',display:'flex',justifyContent:'space-between'}}><div>EFT Helper</div><nav><button onClick={()=>setPage('bosses')}>Bosses</button><button onClick={()=>setPage('map')}>Map</button></nav></header><main style={{padding:16}}>{page==='home' && <div><h2>Главная</h2><div style={{display:'flex',gap:12,alignItems:'center'}}><div style={{border:'1px solid #ddd',padding:8,borderRadius:6}}><strong>Goon Tracker</strong><div>{goon.map? <div>Гуны: <b>{goon.map}</b></div>:<div>Нет данных</div>}<div style={{fontSize:12,color:'#666'}}>Последнее: {goon.updatedAt||'—'}</div><button onClick={async()=>{ const res = await axios.get((import.meta.env.VITE_BACKEND_URL||'http://localhost:5000') + '/api/goons'); setGoon(res.data); }}>Обновить</button></div></div></div>}</main>{page==='bosses' && <BossList onShowMap={(b)=>{ setSelectedBoss(b); setPage('map'); }} />} {page==='map' && <MapView boss={selectedBoss} />}</div>); }
